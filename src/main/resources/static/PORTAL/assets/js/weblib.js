!function(e,t){for(var r in t)e[r]=t[r]}(this,function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.r(t);var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,o;return t=e,o=[{key:"isNully",value:function(e){return null==e}},{key:"isNullyOrEmpty",value:function(e){return this.isNully(e)||"string"==typeof e&&""===e}},{key:"isFloat",value:function(e){return!this.isNully(e)&&!isNaN(parseFloat(e))&&isFinite(e)}},{key:"isInt",value:function(e){return!this.isNully(e)&&!isNaN(parseInt(e))&&isFinite(e)&&-1===e.toString().indexOf(".")}},{key:"addZeroForLessThan9AsStr",value:function(e){return e<=9?"0"+e:""+e}},{key:"mergeObjects",value:function(e,t){var r={};function n(e,t){$.each(t,(function(t,r){e[t]=r}))}return this.isNully(e)||n(r,e),this.isNully(t)||n(r,t),r}},{key:"stringListToArray",value:function(e,t){var r=this,n=[];if(this.isNully(e))return n;if(this.isNully(t))return[e];var o=e.split(t);return!this.isNully(o)&&o.length>0&&o.forEach((function(e,t){r.isNully(e)||(e=e.trim()),""!==e&&n.push(e)})),n}},{key:"arrayToStringList",value:function(e,t){var r=this,n="";if(this.isNully(e))return n;this.isNully(t)&&(t=",");var o=[];return e.forEach((function(e,t){r.isNully(e)||o.push(e)})),n=o.join(t)}},{key:"b64toBlob",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:512,n=atob(e),o=[],a=0;a<n.length;a+=r){for(var i=n.slice(a,a+r),l=new Array(i.length),c=0;c<i.length;c++)l[c]=i.charCodeAt(c);var s=new Uint8Array(l);o.push(s)}var u=new Blob(o,{type:t});return u}},{key:"stripHtmlFromString",value:function(t){return e.isNullyOrEmpty(t)?t:t.replace(/<\/?[^>]+(>|$)/g,"")}}],(r=null)&&n(t.prototype,r),o&&n(t,o),e}();function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,n=[{key:"pasteImageInFabric",value:function(e,t,r,n){console.log("FabricTools.pasteImageInFabric start"),o.isNully(r)&&(r=!0),r&&e.stopImmediatePropagation();for(var i=(e.clipboardData||e.originalEvent.clipboardData).items,l=0,c=Object.entries(i);l<c.length;l++){var s=a(c[l],2),u=(s[0],s[1]);if("file"===u.kind){var f=u.getAsFile(),y=new FileReader;y.onload=function(e){t.clear(),fabric.Image.fromURL(e.target.result,(function(e){e.scaleToWidth(t.getWidth()),e.scaleToHeight(t.getHeight()),t.add(e),t.renderAll(),console.log("FabricTools.pasteImageInFabric pasted"),o.isNully(n)||(console.log("FabricTools.pasteImageInFabric calling callback"),n())}),{left:0,top:0,scaleX:1,scaleY:1})},y.readAsDataURL(f)}}console.log("FabricTools.pasteImageInFabric end")}},{key:"pasteBase64ImageInFabric",value:function(e,t,r){console.log("FabricTools.pasteBase64ImageInFabric start");var n=o.b64toBlob(e,"image/png"),a=new FileReader;a.onload=function(e){t.clear(),fabric.Image.fromURL(e.target.result,(function(e){e.scaleToWidth(t.getWidth()),e.scaleToHeight(t.getHeight()),t.add(e),t.renderAll(),console.log("FabricTools.pasteBase64ImageInFabric pasted"),o.isNully(r)||(console.log("FabricTools.pasteBase64ImageInFabric calling callback"),r())}),{left:0,top:0,scaleX:1,scaleY:1})},a.readAsDataURL(n),console.log("FabricTools.pasteBase64ImageInFabric end")}}],(r=null)&&i(t.prototype,r),n&&i(t,n),e}();function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,n=[{key:"ajaxAction",value:function(e){if(o.isNullyOrEmpty(e))throw"Specify options.";if(o.isNullyOrEmpty(e.url))throw"Specify url.";o.isNullyOrEmpty(e.onSuccess)&&(e.onSuccess=function(){}),o.isNullyOrEmpty(e.onComplete)&&(e.onComplete=function(){}),o.isNullyOrEmpty(e.processData)&&(e.processData=!0),o.isNullyOrEmpty(e.onError)&&(e.onError=function(e){var t=!0,r=e.responseText;try{var n=JSON.parse(r);alert(n.error)}catch(e){t=!1}t||(""===r.trim()&&(r="Server error"),alert(r))}),o.isNullyOrEmpty(e.method)&&(e.method="get"),o.isNullyOrEmpty(e.async)&&(e.async=!0),o.isNullyOrEmpty(e.data)&&(e.data={}),o.isNullyOrEmpty(e.headers)&&(e.headers={}),o.isNullyOrEmpty(e.data)&&(e.data=null),$.ajax({context:this,type:e.method,data:e.data,url:e.url,async:e.async,complete:e.onComplete,success:e.onSuccess,error:e.onError,headers:e.headers,contentType:e.contentType,processData:e.processData})}},{key:"goPost",value:function(e,t,r,n){n=void 0!==n?n:"_self";var o="post_form_"+(r=void 0!==r?r:Math.floor(3571*Math.random()));$("#"+o).remove();var a='<form action="'+e+'" method="post" target = "'+n+'" id="'+o+'" name="'+o+'">';for(var i in t)if(t.hasOwnProperty(i)&&(a+='<input type="hidden" name="'+i+'" id="'+i+"_"+r+'" value="'+t[i]+'" />',"req"===i)){var l=t[i];for(var c in l)l.hasOwnProperty(c)&&(a+='<input type="hidden" name="'+c+'" id="'+c+"_"+r+'" value="'+l[c]+'" />')}a+="</form>";var s=$(a);$("body").append(s),$(s).submit()}}],(r=null)&&c(t.prototype,r),n&&c(t,n),e}();function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}s.corsHeaders={"Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":"true","Access-Control-Allow-Methods":"POST, PUT, GET, OPTIONS, DELETE, HEAD","Access-Control-Allow-Headers":"Access-Control-Allow-Headers, Access-Control-Allow-Origin, Access-Control-Request-Method, Access-Control-Request-Headers, Access-Control-Allow-Credentials, Access-Control-Allow-Methods, Origin, Accept, X-Requested-With, Content-Type, X-PINGOTHER, Authorization"};var f,y=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,n=[{key:"getLocation",value:function(e,t){if(o.isNully(e)&&(e=function(e){return console.log("position: "+e)}),o.isNully(t)&&(t=function(e){switch(e.code){case e.PERMISSION_DENIED:throw"User denied the request for Geolocation.";case e.POSITION_UNAVAILABLE:throw"Location information is unavailable.";case e.TIMEOUT:throw"The request to get user location timed out.";case e.UNKNOWN_ERROR:throw"An unknown error occurred."}}),!navigator.geolocation)throw"Geolocation is not supported by this browser.";navigator.geolocation.getCurrentPosition(e,t)}},{key:"getUserLocalIp",value:function(){var e=!1;if(window.RTCPeerConnection=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection||!1,window.RTCPeerConnection){e=[];var t=new RTCPeerConnection({iceServers:[]});t.createDataChannel(""),t.createOffer(t.setLocalDescription.bind(t),(function(){})),t.onicecandidate=function(t){if(t&&t.candidate&&t.candidate.candidate){var r=t.candidate.candidate.split("\n");e.push(r[0].split(" ")[4])}}}return e}},{key:"getMultiElementVal",value:function(){for(var e=null,t=0;t<arguments.length;t++){try{if(!o.isNully(arguments[t])){var r=$("#"+arguments[t]);o.isNully(r)||(e=r.is("input:checkbox")?r.is(":checked")?1:0:r.is("textarea")?r.html():r.val())}}catch(e){console.error("Error while reading value."),console.error(e)}if(!o.isNullyOrEmpty(e))break}return e}}],(r=null)&&u(t.prototype,r),n&&u(t,n),e}();y.typewatch=(f=0,function(e,t){clearTimeout(f),f=setTimeout(e,t)}),r.d(t,"ObjTools",(function(){return o})),r.d(t,"FabricTools",(function(){return l})),r.d(t,"AjaxTools",(function(){return s})),r.d(t,"BrowserTools",(function(){return y}))}]));
//# sourceMappingURL=weblib.js.map